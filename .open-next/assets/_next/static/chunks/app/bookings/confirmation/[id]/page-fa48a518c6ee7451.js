(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[69],{8337:function(e,s,t){Promise.resolve().then(t.bind(t,1158))},3639:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(9763).Z)("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},5302:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(9763).Z)("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},5863:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(9763).Z)("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},3774:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(9763).Z)("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]])},9376:function(e,s,t){"use strict";var a=t(5475);t.o(a,"useParams")&&t.d(s,{useParams:function(){return a.useParams}}),t.o(a,"usePathname")&&t.d(s,{usePathname:function(){return a.usePathname}}),t.o(a,"useRouter")&&t.d(s,{useRouter:function(){return a.useRouter}}),t.o(a,"useSearchParams")&&t.d(s,{useSearchParams:function(){return a.useSearchParams}})},1158:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return h}});var a=t(7437),r=t(2265),n=t(9376),l=t(7648),i=t(5863),c=t(3639),o=t(3774),d=t(5302),u=t(9889);let m=()=>(0,a.jsxs)("div",{className:"min-h-screen flex items-center justify-center",children:[(0,a.jsx)(i.Z,{className:"h-8 w-8 animate-spin text-blue-600"}),(0,a.jsx)("span",{className:"ml-2",children:"Loading confirmation..."})]});function x(){var e;let s=(0,n.useRouter)(),t=(0,n.useParams)(),r=(0,n.useSearchParams)(),i=t.id,x=r.get("paymentId"),{data:h,error:p,status:f}=(0,u.i)(i?"/api/bookings/".concat(i):null),b=null==h?void 0:h.data;if("loading"===f)return(0,a.jsx)(m,{});if("error"===f)return(0,a.jsxs)("div",{className:"min-h-screen flex flex-col items-center justify-center text-center px-4 py-10",children:[(0,a.jsx)(c.Z,{className:"h-12 w-12 text-red-500 mb-4"}),(0,a.jsx)("h2",{className:"text-2xl font-semibold text-red-600 mb-4",children:"Error Loading Confirmation"}),(0,a.jsx)("p",{className:"text-gray-700 mb-6",children:(null==p?void 0:p.message)||"Could not fetch booking details."}),(0,a.jsx)(l.default,{href:"/user/bookings",className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Back to My Bookings"})]});if("success"===f&&!b)return(0,a.jsxs)("div",{className:"min-h-screen flex flex-col items-center justify-center text-center px-4 py-10",children:[(0,a.jsx)(o.Z,{className:"h-12 w-12 text-gray-400 mb-4"}),(0,a.jsx)("h2",{className:"text-2xl font-semibold text-gray-700 mb-4",children:"Booking Not Found"}),(0,a.jsxs)("p",{className:"text-gray-600 mb-6",children:["Could not find details for booking ID: ",i]}),(0,a.jsx)(l.default,{href:"/user/bookings",className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Back to My Bookings"})]});if(!b)return(0,a.jsxs)("div",{className:"min-h-screen flex flex-col items-center justify-center text-center px-4 py-10",children:[(0,a.jsx)(c.Z,{className:"h-12 w-12 text-orange-500 mb-4"}),(0,a.jsx)("h2",{className:"text-2xl font-semibold text-gray-700 mb-4",children:"Data Error"}),(0,a.jsx)("p",{className:"text-gray-600 mb-6",children:"Could not display booking details. Please try refreshing."}),(0,a.jsx)(l.default,{href:"/user/bookings",className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Back to My Bookings"})]});let g={};if(b.payment_details)try{g=JSON.parse(b.payment_details)}catch(e){console.error("Failed to parse payment details JSON:",b.payment_details)}let j=(null==g?void 0:g.paymentId)||x||"N/A",N=b.guest_name||(null===(e=b.user_id)||void 0===e?void 0:e.toString())||"N/A",y=b.guest_email||"N/A",k=b.guest_phone||"N/A";return(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 py-12",children:(0,a.jsx)("div",{className:"container mx-auto px-4",children:(0,a.jsxs)("div",{className:"max-w-3xl mx-auto",children:[(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:[(0,a.jsxs)("div",{className:"px-6 py-8 border-b text-center",children:[(0,a.jsx)(d.Z,{className:"h-16 w-16 text-green-500 mx-auto mb-4"}),(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Booking Confirmed!"}),(0,a.jsx)("p",{className:"text-gray-600",children:"paid"===b.payment_status?"Your booking is confirmed and payment was successful.":"Your booking is confirmed. Payment status: "+b.payment_status})]}),(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold mb-4 pb-2 border-b",children:"Booking Details"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[(0,a.jsxs)("div",{children:[" ",(0,a.jsx)("p",{className:"text-gray-500 mb-1",children:"Booking ID"})," ",(0,a.jsx)("p",{className:"font-medium break-words",children:b.id})," "]}),(0,a.jsxs)("div",{children:[" ",(0,a.jsx)("p",{className:"text-gray-500 mb-1",children:"Package"})," ",(0,a.jsx)("p",{className:"font-medium",children:b.package_name||"Package ID: ".concat(b.package_id||"N/A")})," "]}),(0,a.jsxs)("div",{children:[" ",(0,a.jsx)("p",{className:"text-gray-500 mb-1",children:"Travel Dates"})," ",(0,a.jsxs)("p",{className:"font-medium",children:[b.start_date," to ",b.end_date]})," "]}),(0,a.jsxs)("div",{children:[" ",(0,a.jsx)("p",{className:"text-gray-500 mb-1",children:"Guests"})," ",(0,a.jsx)("p",{className:"font-medium",children:b.total_people})," "]}),b.special_requests&&(0,a.jsxs)("div",{className:"md:col-span-2",children:[" ",(0,a.jsx)("p",{className:"text-gray-500 mb-1",children:"Special Requests"})," ",(0,a.jsx)("p",{className:"font-medium whitespace-pre-wrap",children:b.special_requests})," "]})]})]}),(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold mb-4 pb-2 border-b",children:"Payment Information"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[(0,a.jsxs)("div",{children:[" ",(0,a.jsx)("p",{className:"text-gray-500 mb-1",children:"Total Amount"})," ",(0,a.jsxs)("p",{className:"font-medium",children:["â‚¹",b.total_amount.toLocaleString("en-IN")]})," "]}),(0,a.jsxs)("div",{children:[" ",(0,a.jsx)("p",{className:"text-gray-500 mb-1",children:"Payment Status"})," ",(0,a.jsx)("p",{className:"font-medium capitalize",children:b.payment_status})," "]}),"paid"===b.payment_status&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{children:[" ",(0,a.jsx)("p",{className:"text-gray-500 mb-1",children:"Payment ID"})," ",(0,a.jsx)("p",{className:"font-medium break-words",children:j})," "]}),(0,a.jsxs)("div",{children:[" ",(0,a.jsx)("p",{className:"text-gray-500 mb-1",children:"Payment Method"})," ",(0,a.jsx)("p",{className:"font-medium",children:"Online (Razorpay)"})," "]})]})]})]}),(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold mb-4 pb-2 border-b",children:"Your Information"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[(0,a.jsxs)("div",{children:[" ",(0,a.jsx)("p",{className:"text-gray-500 mb-1",children:"Name"})," ",(0,a.jsx)("p",{className:"font-medium",children:N})," "]}),(0,a.jsxs)("div",{children:[" ",(0,a.jsx)("p",{className:"text-gray-500 mb-1",children:"Email"})," ",(0,a.jsx)("p",{className:"font-medium break-words",children:y})," "]}),(0,a.jsxs)("div",{children:[" ",(0,a.jsx)("p",{className:"text-gray-500 mb-1",children:"Phone"})," ",(0,a.jsx)("p",{className:"font-medium",children:k})," "]})]})]}),(0,a.jsx)("div",{className:"bg-blue-50 p-4 rounded-md mb-8",children:(0,a.jsxs)("p",{className:"text-sm text-blue-700",children:["A confirmation email","N/A"!==y?" has been sent to ".concat(y):""," with all the details. Please check your inbox (and spam folder)."]})}),(0,a.jsxs)("div",{className:"flex flex-col md:flex-row space-y-4 md:space-y-0 md:space-x-4",children:[(0,a.jsx)("button",{onClick:()=>{alert("Receipt download functionality to be implemented.")},disabled:"paid"!==b.payment_status,className:"bg-white border border-blue-600 text-blue-600 hover:bg-blue-50 font-medium py-2 px-4 rounded-md flex-1 disabled:opacity-50 disabled:cursor-not-allowed",children:" Download Receipt "}),(0,a.jsx)("button",{onClick:()=>{b.package_id?s.push("/packages/".concat(b.package_id)):alert("Package details unavailable for this booking.")},disabled:!b.package_id,className:"bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded-md flex-1 disabled:opacity-50 disabled:cursor-not-allowed",children:" View Package Details "})]})]})]}),(0,a.jsx)("div",{className:"mt-8 text-center",children:(0,a.jsx)(l.default,{href:"/user/bookings",className:"text-blue-600 hover:text-blue-800 font-medium",children:" View All My Bookings "})})]})})})}function h(){return(0,a.jsx)(r.Suspense,{fallback:(0,a.jsx)(m,{}),children:(0,a.jsx)(x,{})})}},9889:function(e,s,t){"use strict";t.d(s,{i:function(){return r},q:function(){return n}});var a=t(2265);function r(e,s){let[t,r]=(0,a.useState)(null),[n,l]=(0,a.useState)(null),[i,c]=(0,a.useState)("idle"),o=JSON.stringify(s);return(0,a.useEffect)(()=>{(async()=>{if(!e){c("idle"),r(null),l(null);return}c("loading"),r(null),l(null);try{let s;let t=JSON.parse(o||"{}"),a=await fetch(e,{...t,credentials:"include"});try{s=await a.json()}catch(e){throw Error("Request failed with status ".concat(a.status," and non-JSON response."))}if(!a.ok){let e=(null==s?void 0:s.message)||a.statusText||"HTTP error! Status: ".concat(a.status);throw Error(e)}if(s.success)void 0!==s.data?(r(s.data),c("success")):(r(null),c("success"),console.warn("Fetch successful but no data returned for URL: ".concat(e)));else throw Error(s.message||"API returned success: false")}catch(s){console.error("Fetch error for URL ".concat(e,":"),s),l(s instanceof Error?s:Error("Unknown fetch error occurred")),c("error")}})()},[e,o]),{data:t,error:n,status:i,isLoading:"loading"===i}}function n(e){let[s,t]=(0,a.useState)(null),[r,n]=(0,a.useState)(null),[l,i]=(0,a.useState)("idle");return{submit:async function(s){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"POST";i("loading"),t(null),n(null);try{let r;let n=await fetch(e,{method:a,headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(s),credentials:"include"});try{r=await n.json()}catch(e){throw console.error("Failed to parse JSON response:",e),Error("Request failed with status ".concat(n.status," and non-JSON response."))}if(n.ok&&r.success){if(void 0!==r.data)return t(r.data),i("success"),{success:!0,data:r.data};return t(null),i("success"),console.warn("Submit successful but no data returned for URL: ".concat(e)),{success:!0,data:null}}throw Error(r.message||"API Error: Status ".concat(n.status))}catch(s){console.error("Submit error:",s);let e=s instanceof Error?s.message:"Unknown submit error occurred";return n(Error(e)),i("error"),{success:!1,error:e}}},data:s,error:r,status:l,isLoading:"loading"===l,reset:()=>{t(null),n(null),i("idle")}}}}},function(e){e.O(0,[451,971,117,744],function(){return e(e.s=8337)}),_N_E=e.O()}]);