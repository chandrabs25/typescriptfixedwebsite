var G=Object.defineProperty;var Y=Object.getOwnPropertyDescriptor;var Z=Object.getOwnPropertyNames;var ee=Object.prototype.hasOwnProperty;var te=(o,i)=>()=>(o&&(i=o(o=0)),i);var H=(o,i,K,k)=>{if(i&&typeof i=="object"||typeof i=="function")for(let x of Z(i))!ee.call(o,x)&&x!==K&&G(o,x,{get:()=>i[x],enumerable:!(k=Y(i,x))||k.enumerable});return o},X=(o,i,K)=>(H(o,i,"default"),K&&H(K,i,"default"));var ne=o=>H(G({},"__esModule",{value:!0}),o);var F={};import*as Et from"async_hooks";var V=te(()=>{X(F,Et)});import{__getNamedExports as _e}from"../../../../__next-on-pages-dist__/webpack/7528.js";import{__getNamedExports as re}from"../../../../__next-on-pages-dist__/webpack/1d2470119d4f846d0a077893f2422c32.js";import{__getNamedExports as ae}from"../../../../__next-on-pages-dist__/webpack/a5c1deeab945ebbd806cfcb1edb1cad5.js";import{__getNamedExports as se}from"../../../../__next-on-pages-dist__/webpack/ac7e0cd817c0f96ac6506045b651299a.js";import{__getNamedExports as oe}from"../../../../__next-on-pages-dist__/webpack/841752b73933acd57f0d034e25bbec96.js";import{__getNamedExports as ce}from"../../../../__next-on-pages-dist__/manifest/537259e2ed205f5a7994cb4f05664668.js";var d=globalThis.__nextOnPagesRoutesIsolation.getProxyFor("/api/auth/register"),ue=_e(d,d,d),ie=ue.__chunk_7528,z=re(d,d,d),de=z.__chunk_9985,ge=z.__chunk_4155,J=ae(d,d,d),he=J.__chunk_468,pe=J.__chunk_7178,n=se(d,d,d),ke=n.__chunk_6195,xe=n.__chunk_2067,le=n.__chunk_9182,me=n.__chunk_8983,fe=n.__chunk_5228,be=n.__chunk_2296,ye=n.__chunk_2594,ve=n.__chunk_6735,Ee=n.__chunk_8219,Re=n.__chunk_5577,$e=n.__chunk_9254,we=n.__chunk_9206,Pe=n.__chunk_989,Ne=n.__chunk_1863,Oe=n.__chunk_3039,je=n.__chunk_335,Se=n.__chunk_8042,Ce=n.__chunk_7765,Te=n.__chunk_6991,Ae=n.__chunk_8816,Ie=n.__chunk_6631,Ke=n.__chunk_4828,Me=n.__chunk_4834,Fe=n.__chunk_828,Le=n.__chunk_5927,Ue=n.__chunk_8439,De=n.__chunk_4363,qe=n.__chunk_2039,Be=n.__chunk_8264,He=n.__chunk_1583,Xe=n.__chunk_7908,We=n.__chunk_8949,Ge=n.__chunk_796,Ve=n.__chunk_1651,ze=n.__chunk_5105,Je=n.__chunk_9642,Qe=n.__chunk_5028,Ye=n.__chunk_9548,Ze=n.__chunk_6914,et=n.__chunk_7960,tt=n.__chunk_4337,nt=n.__chunk_8819,p=oe(d,d,d),_t=p.__chunk_1730,rt=p.__chunk_3818,at=p.__chunk_7037,st=p.__chunk_9573,ot=p.__chunk_7701,ct=p.__chunk_662,ut=p.__chunk_4101,it=p.__chunk_6776,dt=p.__chunk_3665,gt=p.__chunk_7444,ht=p.__chunk_4591,pt=p.__chunk_7983,kt=p.__chunk_5234,xt=p.__chunk_2561,lt=p.__chunk_2988,mt=p.__chunk_5996,ft=p.__chunk_676,Q=ce(d,d,d),bt=Q.__NEXT_FONT_MANIFEST,yt=Q.__REACT_LOADABLE_MANIFEST,jt=((o,i,K)=>(i._ENTRIES={},o.__BUILD_MANIFEST={polyfillFiles:["static/chunks/polyfills-42372ed130431b0a.js"],devFiles:[],ampDevFiles:[],lowPriorityFiles:[],rootMainFiles:["static/chunks/webpack-dedf763cc1ab7e12.js","static/chunks/fd9d1056-c9ed5066b0595dc4.js","static/chunks/30-d61876bacc5f7fe8.js","static/chunks/main-app-7952d10a904833a3.js"],pages:{"/_app":["static/chunks/webpack-dedf763cc1ab7e12.js","static/chunks/framework-f66176bb897dc684.js","static/chunks/main-bc32f17986994602.js","static/chunks/pages/_app-72b849fbd24ac258.js"],"/_error":["static/chunks/webpack-dedf763cc1ab7e12.js","static/chunks/framework-f66176bb897dc684.js","static/chunks/main-bc32f17986994602.js","static/chunks/pages/_error-7ba65e1336b92748.js"]},ampFirstPages:[]},o.__BUILD_MANIFEST.lowPriorityFiles=["/static/8V3TQEJtcpB3zmG4GiWhE/_buildManifest.js",,"/static/8V3TQEJtcpB3zmG4GiWhE/_ssgManifest.js"],o.__REACT_LOADABLE_MANIFEST=yt,o.__NEXT_FONT_MANIFEST=bt,o.__INTERCEPTION_ROUTE_REWRITE_MANIFEST="[]",(()=>{"use strict";var k={},x={};function _(t){var u=x[t];if(u!==void 0)return u.exports;var c=x[t]={exports:{}},l=!0;try{k[t](c,c.exports,_),l=!1}finally{l&&delete x[t]}return c.exports}_.m=k,_.amdO={},(()=>{var t=[];_.O=(u,c,l,m)=>{if(c){m=m||0;for(var g=t.length;g>0&&t[g-1][2]>m;g--)t[g]=t[g-1];t[g]=[c,l,m];return}for(var h=1/0,g=0;g<t.length;g++){for(var[c,l,m]=t[g],R=!0,b=0;b<c.length;b++)h>=m&&Object.keys(_.O).every(T=>_.O[T](c[b]))?c.splice(b--,1):(R=!1,m<h&&(h=m));if(R){t.splice(g--,1);var N=l();N!==void 0&&(u=N)}}return u}})(),_.n=t=>{var u=t&&t.__esModule?()=>t.default:()=>t;return _.d(u,{a:u}),u},_.d=(t,u)=>{for(var c in u)_.o(u,c)&&!_.o(t,c)&&Object.defineProperty(t,c,{enumerable:!0,get:u[c]})},_.e=()=>Promise.resolve(),_.g=function(){if(typeof i=="object")return i;try{return this||Function("return this")()}catch{if(typeof window=="object")return window}}(),_.o=(t,u)=>Object.prototype.hasOwnProperty.call(t,u),_.r=t=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},(()=>{var t={993:0};_.O.j=l=>t[l]===0;var u=(l,m)=>{var g,h,[R,b,N]=m,S=0;if(R.some(M=>t[M]!==0)){for(g in b)_.o(b,g)&&(_.m[g]=b[g]);if(N)var C=N(_)}for(l&&l(m);S<R.length;S++)h=R[S],_.o(t,h)&&t[h]&&t[h][0](),t[h]=0;return _.O(C)},c=o.webpackChunk_N_E=o.webpackChunk_N_E||[];c.forEach(u.bind(null,0)),c.push=u.bind(null,c.push.bind(c))})()})(),(o.webpackChunk_N_E=o.webpackChunk_N_E||[]).push([[720],{8819:nt,4337:tt,7960:et,6914:Ze,9548:Ye,5028:Qe,9642:Je,5105:ze,1651:Ve,796:Ge,8949:We,7908:Xe,1583:He,8264:Be,2039:qe,4363:De,8439:Ue,5927:Le,828:Fe,4834:Me,4828:Ke,6631:Ie,8816:Ae,6991:Te,7765:Ce,8042:Se,335:je,3039:Oe,1863:Ne,989:Pe,9206:we,9254:$e,5577:Re,8219:Ee,6735:ve,2594:ye,2296:be,5228:fe,8983:me,9182:le}]),(o.webpackChunk_N_E=o.webpackChunk_N_E||[]).push([[883],{676:ft,5996:mt,2988:lt,2561:xt,5234:kt,7983:pt,4591:ht,7444:gt,3665:dt,6776:it,4101:ut,662:ct,7701:ot,9573:st,7037:at,3818:rt,1730:_t}]),(o.webpackChunk_N_E=o.webpackChunk_N_E||[]).push([[178],{7178:pe}]),(o.webpackChunk_N_E=o.webpackChunk_N_E||[]).push([[2],{2067:xe,6195:ke,468:he,6179:(k,x,_)=>{"use strict";_.r(x),_.d(x,{ComponentMod:()=>D,default:()=>q});var t={};_.r(t),_.d(t,{POST:()=>S,runtime:()=>N});var u={};_.r(u),_.d(u,{originalPathname:()=>L,patchFetch:()=>U,requestAsyncStorage:()=>M,routeModule:()=>C,serverHooks:()=>T,staticGenerationAsyncStorage:()=>I});var c=_(7983),l=_(2561),m=_(4828),g=_(6631),h=_(9985),R=_(7528),b=_(7178);let N="edge";async function S(B){try{let O=(0,R.N)(),{name:$,email:A,password:y,phone:e}=await B.json();if(!$||!A||!y)return h.xk.json({success:!1,message:"Name, email, and password are required"},{status:400});if(y.length<6)return h.xk.json({success:!1,message:"Password must be at least 6 characters long"},{status:400});if(!/\S+@\S+\.\S+/.test(A))return h.xk.json({success:!1,message:"Invalid email format"},{status:400});let s=$.trim().split(" "),a=s[0],r=s.length>1?s.slice(1).join(" "):"";if(await O.prepare("SELECT id FROM users WHERE email = ?").bind(A).first())return h.xk.json({success:!1,message:"User with this email already exists"},{status:409});let w=await b.Dx(10),f=await b.vp(y,w),P=await O.prepare(`
        INSERT INTO users (first_name, last_name, email, password_hash, phone, role_id, created_at, updated_at)
        VALUES (?, ?, ?, ?, ?, ?, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP)
      `).bind(a,r,A,f,e||null,2).run(),v=P.meta?.last_row_id;if(!v)return console.error("User insert failed or D1 did not return last_row_id:",P),h.xk.json({success:!1,message:"Database error occurred during registration."},{status:500});let E=await O.prepare("SELECT id, email, first_name, last_name, role_id FROM users WHERE id = ?").bind(v).first();return E||console.warn(`Could not fetch newly created user with ID: ${v}`),h.xk.json({success:!0,message:"User registered successfully",data:E||{id:v}},{status:201})}catch(O){console.error("Error registering user:",O);let $=O instanceof Error?O.message:"An unknown error occurred";return h.xk.json({success:!1,message:"An internal server error occurred during registration.",error:$},{status:500})}}let C=new l.AppRouteRouteModule({definition:{kind:m.x.APP_ROUTE,page:"/api/auth/register/route",pathname:"/api/auth/register",filename:"route",bundlePath:"app/api/auth/register/route"},resolvedPagePath:"/home/chandra/andaman_website_CLI/andaman website CLI/src/app/api/auth/register/route.ts",nextConfigOutput:"",userland:t}),{requestAsyncStorage:M,staticGenerationAsyncStorage:I,serverHooks:T}=C,L="/api/auth/register/route";function U(){return(0,g.XH)({serverHooks:T,staticGenerationAsyncStorage:I})}let D=u,q=c.a.wrap(C)},4155:ge,9985:de,7528:ie},k=>{var x=t=>k(k.s=t);k.O(0,[720,883,178],()=>x(6179));var _=k.O();(i._ENTRIES=typeof i._ENTRIES>"u"?{}:i._ENTRIES)["middleware_app/api/auth/register/route"]=_}]),function(){let k={exports:{},loaded:!1};return function(_,t){var u=Object.create,c=Object.defineProperty,l=Object.getOwnPropertyDescriptor,m=Object.getOwnPropertyNames,g=Object.getPrototypeOf,h=Object.prototype.hasOwnProperty,R=e=>c(e,"__esModule",{value:!0}),b=(e,s)=>{R(e);for(var a in s)c(e,a,{get:s[a],enumerable:!0})},N=(e,s,a)=>{if(s&&typeof s=="object"||typeof s=="function")for(let r of m(s))!h.call(e,r)&&r!=="default"&&c(e,r,{get:()=>s[r],enumerable:!(a=l(s,r))||a.enumerable});return e},S=e=>N(R(c(e!=null?u(g(e)):{},"default",e&&e.__esModule&&"default"in e?{get:()=>e.default,enumerable:!0}:{value:e,enumerable:!0})),e);b(t,{default:()=>O});var C=S((V(),ne(F))),M="@next/request-context",I=Symbol.for(M),T=Symbol.for("internal.storage");function L(){let e=i;if(!e[I]){let s=new C.AsyncLocalStorage,a={get:()=>s.getStore(),[T]:s};e[I]=a}return e[I]}var U=L();function D(e,s){return U[T].run(e,s)}function q(e){let s={};return e&&e.forEach((a,r)=>{s[r]=a,r.toLowerCase()==="set-cookie"&&(s[r]=B(a))}),s}function B(e){let s=[],a=0,r,w,f,P,v;function E(){for(;a<e.length&&/\s/.test(e.charAt(a));)a+=1;return a<e.length}function j(){return w=e.charAt(a),w!=="="&&w!==";"&&w!==","}for(;a<e.length;){for(r=a,v=!1;E();)if(w=e.charAt(a),w===","){for(f=a,a+=1,E(),P=a;a<e.length&&j();)a+=1;a<e.length&&e.charAt(a)==="="?(v=!0,a=P,s.push(e.substring(r,f)),r=a):a=f+1}else a+=1;(!v||a>=e.length)&&s.push(e.substring(r,e.length))}return s}function O(e){let s=e.staticRoutes.map(r=>({regexp:new RegExp(r.namedRegex),page:r.page})),a=e.dynamicRoutes?.map(r=>({regexp:new RegExp(r.namedRegex),page:r.page}))||[];return async function(r,w){let f=new URL(r.url).pathname,P={};if(e.nextConfig?.basePath&&f.startsWith(e.nextConfig.basePath)&&(f=f.replace(e.nextConfig.basePath,"")||"/"),e.nextConfig?.i18n)for(let E of e.nextConfig.i18n.locales){let j=new RegExp(`^/${E}($|/)`,"i");if(f.match(j)){f=f.replace(j,"/")||"/";break}}for(let E of s)if(E.regexp.exec(f)){P.name=E.page;break}if(!P.name){let E=A(f);for(let j of a||[]){if(E&&!A(j.page))continue;let W=j.regexp.exec(f);if(W){P={name:j.page,params:W.groups};break}}}let v=await D({waitUntil:w.waitUntil},()=>i._ENTRIES[`middleware_${e.name}`].default.call({},{request:{url:r.url,method:r.method,headers:q(r.headers),ip:$(r.headers,y.Ip),geo:{city:$(r.headers,y.City,!0),country:$(r.headers,y.Country,!0),latitude:$(r.headers,y.Latitude),longitude:$(r.headers,y.Longitude),region:$(r.headers,y.Region,!0)},nextConfig:e.nextConfig,page:P,body:r.body}}));return v.waitUntil&&w.waitUntil(v.waitUntil),v.response}}function $(e,s,a=!1){let r=e.get(s)||void 0;return a&&r?decodeURIComponent(r):r}function A(e){return e==="/api"||e.startsWith("/api/")}var y;(function(e){e.City="x-vercel-ip-city",e.Country="x-vercel-ip-country",e.Ip="x-real-ip",e.Latitude="x-vercel-ip-latitude",e.Longitude="x-vercel-ip-longitude",e.Region="x-vercel-ip-country-region"})(y||(y={}))}(k,k.exports),k.exports}.call({}).default({name:"app/api/auth/register/route",staticRoutes:[{page:"/",regex:"^/(?:/)?$",routeKeys:{},namedRegex:"^/(?:/)?$"},{page:"/_not-found",regex:"^/_not\\-found(?:/)?$",routeKeys:{},namedRegex:"^/_not\\-found(?:/)?$"},{page:"/about",regex:"^/about(?:/)?$",routeKeys:{},namedRegex:"^/about(?:/)?$"},{page:"/activities",regex:"^/activities(?:/)?$",routeKeys:{},namedRegex:"^/activities(?:/)?$"},{page:"/auth/signin",regex:"^/auth/signin(?:/)?$",routeKeys:{},namedRegex:"^/auth/signin(?:/)?$"},{page:"/auth/signup",regex:"^/auth/signup(?:/)?$",routeKeys:{},namedRegex:"^/auth/signup(?:/)?$"},{page:"/contact",regex:"^/contact(?:/)?$",routeKeys:{},namedRegex:"^/contact(?:/)?$"},{page:"/destinations",regex:"^/destinations(?:/)?$",routeKeys:{},namedRegex:"^/destinations(?:/)?$"},{page:"/favicon.ico",regex:"^/favicon\\.ico(?:/)?$",routeKeys:{},namedRegex:"^/favicon\\.ico(?:/)?$"},{page:"/packages",regex:"^/packages(?:/)?$",routeKeys:{},namedRegex:"^/packages(?:/)?$"},{page:"/search",regex:"^/search(?:/)?$",routeKeys:{},namedRegex:"^/search(?:/)?$"},{page:"/search-results",regex:"^/search\\-results(?:/)?$",routeKeys:{},namedRegex:"^/search\\-results(?:/)?$"},{page:"/user/bookings",regex:"^/user/bookings(?:/)?$",routeKeys:{},namedRegex:"^/user/bookings(?:/)?$"},{page:"/user/dashboard",regex:"^/user/dashboard(?:/)?$",routeKeys:{},namedRegex:"^/user/dashboard(?:/)?$"},{page:"/vendor/bookings",regex:"^/vendor/bookings(?:/)?$",routeKeys:{},namedRegex:"^/vendor/bookings(?:/)?$"},{page:"/vendor/dashboard",regex:"^/vendor/dashboard(?:/)?$",routeKeys:{},namedRegex:"^/vendor/dashboard(?:/)?$"},{page:"/vendor/login",regex:"^/vendor/login(?:/)?$",routeKeys:{},namedRegex:"^/vendor/login(?:/)?$"},{page:"/vendor/register",regex:"^/vendor/register(?:/)?$",routeKeys:{},namedRegex:"^/vendor/register(?:/)?$"},{page:"/vendor/services",regex:"^/vendor/services(?:/)?$",routeKeys:{},namedRegex:"^/vendor/services(?:/)?$"},{page:"/vendors",regex:"^/vendors(?:/)?$",routeKeys:{},namedRegex:"^/vendors(?:/)?$"}],dynamicRoutes:[{page:"/api/auth/[...nextauth]",regex:"^/api/auth/(.+?)(?:/)?$",routeKeys:{nxtPnextauth:"nxtPnextauth"},namedRegex:"^/api/auth/(?<nxtPnextauth>.+?)(?:/)?$"},{page:"/api/bookings/[id]",regex:"^/api/bookings/([^/]+?)(?:/)?$",routeKeys:{nxtPid:"nxtPid"},namedRegex:"^/api/bookings/(?<nxtPid>[^/]+?)(?:/)?$"},{page:"/api/destinations/[id]",regex:"^/api/destinations/([^/]+?)(?:/)?$",routeKeys:{nxtPid:"nxtPid"},namedRegex:"^/api/destinations/(?<nxtPid>[^/]+?)(?:/)?$"},{page:"/api/packages/[id]",regex:"^/api/packages/([^/]+?)(?:/)?$",routeKeys:{nxtPid:"nxtPid"},namedRegex:"^/api/packages/(?<nxtPid>[^/]+?)(?:/)?$"},{page:"/api/vendors/[id]",regex:"^/api/vendors/([^/]+?)(?:/)?$",routeKeys:{nxtPid:"nxtPid"},namedRegex:"^/api/vendors/(?<nxtPid>[^/]+?)(?:/)?$"},{page:"/bookings/confirmation/[id]",regex:"^/bookings/confirmation/([^/]+?)(?:/)?$",routeKeys:{nxtPid:"nxtPid"},namedRegex:"^/bookings/confirmation/(?<nxtPid>[^/]+?)(?:/)?$"},{page:"/bookings/payment/[id]",regex:"^/bookings/payment/([^/]+?)(?:/)?$",routeKeys:{nxtPid:"nxtPid"},namedRegex:"^/bookings/payment/(?<nxtPid>[^/]+?)(?:/)?$"},{page:"/destinations/[id]",regex:"^/destinations/([^/]+?)(?:/)?$",routeKeys:{nxtPid:"nxtPid"},namedRegex:"^/destinations/(?<nxtPid>[^/]+?)(?:/)?$"},{page:"/packages/[id]",regex:"^/packages/([^/]+?)(?:/)?$",routeKeys:{nxtPid:"nxtPid"},namedRegex:"^/packages/(?<nxtPid>[^/]+?)(?:/)?$"},{page:"/packages/[id]/book",regex:"^/packages/([^/]+?)/book(?:/)?$",routeKeys:{nxtPid:"nxtPid"},namedRegex:"^/packages/(?<nxtPid>[^/]+?)/book(?:/)?$"}],nextConfig:{basePath:""}})))(d,d,d);export{jt as default};
