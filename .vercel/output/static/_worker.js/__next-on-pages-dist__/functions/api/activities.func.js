var W=Object.defineProperty;var Q=Object.getOwnPropertyDescriptor;var V=Object.getOwnPropertyNames;var Z=Object.prototype.hasOwnProperty;var ee=(c,u)=>()=>(c&&(u=c(c=0)),u);var X=(c,u,T,k)=>{if(u&&typeof u=="object"||typeof u=="function")for(let x of V(u))!Z.call(c,x)&&x!==T&&W(c,x,{get:()=>u[x],enumerable:!(k=Q(u,x))||k.enumerable});return c},H=(c,u,T)=>(X(c,u,"default"),T&&X(T,u,"default"));var te=c=>X(W({},"__esModule",{value:!0}),c);var L={};import*as ft from"async_hooks";var J=ee(()=>{H(L,ft)});import{__getNamedExports as ne}from"../../../__next-on-pages-dist__/webpack/7528.js";import{__getNamedExports as _e}from"../../../__next-on-pages-dist__/webpack/1d2470119d4f846d0a077893f2422c32.js";import{__getNamedExports as re}from"../../../__next-on-pages-dist__/webpack/ac7e0cd817c0f96ac6506045b651299a.js";import{__getNamedExports as se}from"../../../__next-on-pages-dist__/webpack/841752b73933acd57f0d034e25bbec96.js";import{__getNamedExports as ae}from"../../../__next-on-pages-dist__/manifest/537259e2ed205f5a7994cb4f05664668.js";var p=globalThis.__nextOnPagesRoutesIsolation.getProxyFor("/api/activities"),oe=ne(p,p,p),ce=oe.__chunk_7528,Y=_e(p,p,p),ie=Y.__chunk_9985,ue=Y.__chunk_4155,n=re(p,p,p),de=n.__chunk_6195,pe=n.__chunk_2067,ge=n.__chunk_9182,he=n.__chunk_8983,ke=n.__chunk_5228,xe=n.__chunk_2296,le=n.__chunk_2594,me=n.__chunk_6735,fe=n.__chunk_8219,ve=n.__chunk_5577,ye=n.__chunk_9254,be=n.__chunk_9206,Ee=n.__chunk_989,Re=n.__chunk_1863,$e=n.__chunk_3039,Pe=n.__chunk_335,Ne=n.__chunk_8042,we=n.__chunk_7765,Oe=n.__chunk_6991,Ae=n.__chunk_8816,je=n.__chunk_6631,Ie=n.__chunk_4828,Se=n.__chunk_4834,Ce=n.__chunk_828,Te=n.__chunk_5927,Ke=n.__chunk_8439,Fe=n.__chunk_4363,Le=n.__chunk_2039,Me=n.__chunk_8264,De=n.__chunk_1583,Ue=n.__chunk_7908,qe=n.__chunk_8949,Be=n.__chunk_796,Xe=n.__chunk_1651,He=n.__chunk_5105,Ge=n.__chunk_9642,We=n.__chunk_5028,Je=n.__chunk_9548,Ye=n.__chunk_6914,ze=n.__chunk_7960,Qe=n.__chunk_4337,Ve=n.__chunk_8819,g=se(p,p,p),Ze=g.__chunk_1730,et=g.__chunk_3818,tt=g.__chunk_7037,nt=g.__chunk_9573,_t=g.__chunk_7701,rt=g.__chunk_662,st=g.__chunk_4101,at=g.__chunk_6776,ot=g.__chunk_3665,ct=g.__chunk_7444,it=g.__chunk_4591,ut=g.__chunk_7983,dt=g.__chunk_5234,pt=g.__chunk_2561,gt=g.__chunk_2988,ht=g.__chunk_5996,kt=g.__chunk_676,z=ae(p,p,p),xt=z.__NEXT_FONT_MANIFEST,lt=z.__REACT_LOADABLE_MANIFEST,$t=((c,u,T)=>(u._ENTRIES={},c.__BUILD_MANIFEST={polyfillFiles:["static/chunks/polyfills-42372ed130431b0a.js"],devFiles:[],ampDevFiles:[],lowPriorityFiles:[],rootMainFiles:["static/chunks/webpack-dedf763cc1ab7e12.js","static/chunks/fd9d1056-c9ed5066b0595dc4.js","static/chunks/30-d61876bacc5f7fe8.js","static/chunks/main-app-7952d10a904833a3.js"],pages:{"/_app":["static/chunks/webpack-dedf763cc1ab7e12.js","static/chunks/framework-f66176bb897dc684.js","static/chunks/main-bc32f17986994602.js","static/chunks/pages/_app-72b849fbd24ac258.js"],"/_error":["static/chunks/webpack-dedf763cc1ab7e12.js","static/chunks/framework-f66176bb897dc684.js","static/chunks/main-bc32f17986994602.js","static/chunks/pages/_error-7ba65e1336b92748.js"]},ampFirstPages:[]},c.__BUILD_MANIFEST.lowPriorityFiles=["/static/8V3TQEJtcpB3zmG4GiWhE/_buildManifest.js",,"/static/8V3TQEJtcpB3zmG4GiWhE/_ssgManifest.js"],c.__REACT_LOADABLE_MANIFEST=lt,c.__NEXT_FONT_MANIFEST=xt,c.__INTERCEPTION_ROUTE_REWRITE_MANIFEST="[]",(()=>{"use strict";var k={},x={};function s(t){var i=x[t];if(i!==void 0)return i.exports;var o=x[t]={exports:{}},l=!0;try{k[t](o,o.exports,s),l=!1}finally{l&&delete x[t]}return o.exports}s.m=k,s.amdO={},(()=>{var t=[];s.O=(i,o,l,m)=>{if(o){m=m||0;for(var d=t.length;d>0&&t[d-1][2]>m;d--)t[d]=t[d-1];t[d]=[o,l,m];return}for(var h=1/0,d=0;d<t.length;d++){for(var[o,l,m]=t[d],E=!0,y=0;y<o.length;y++)h>=m&&Object.keys(s.O).every(S=>s.O[S](o[y]))?o.splice(y--,1):(E=!1,m<h&&(h=m));if(E){t.splice(d--,1);var P=l();P!==void 0&&(i=P)}}return i}})(),s.n=t=>{var i=t&&t.__esModule?()=>t.default:()=>t;return s.d(i,{a:i}),i},s.d=(t,i)=>{for(var o in i)s.o(i,o)&&!s.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:i[o]})},s.e=()=>Promise.resolve(),s.g=function(){if(typeof u=="object")return u;try{return this||Function("return this")()}catch{if(typeof window=="object")return window}}(),s.o=(t,i)=>Object.prototype.hasOwnProperty.call(t,i),s.r=t=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},(()=>{var t={993:0};s.O.j=l=>t[l]===0;var i=(l,m)=>{var d,h,[E,y,P]=m,j=0;if(E.some(K=>t[K]!==0)){for(d in y)s.o(y,d)&&(s.m[d]=y[d]);if(P)var I=P(s)}for(l&&l(m);j<E.length;j++)h=E[j],s.o(t,h)&&t[h]&&t[h][0](),t[h]=0;return s.O(I)},o=c.webpackChunk_N_E=c.webpackChunk_N_E||[];o.forEach(i.bind(null,0)),o.push=i.bind(null,o.push.bind(o))})()})(),(c.webpackChunk_N_E=c.webpackChunk_N_E||[]).push([[720],{8819:Ve,4337:Qe,7960:ze,6914:Ye,9548:Je,5028:We,9642:Ge,5105:He,1651:Xe,796:Be,8949:qe,7908:Ue,1583:De,8264:Me,2039:Le,4363:Fe,8439:Ke,5927:Te,828:Ce,4834:Se,4828:Ie,6631:je,8816:Ae,6991:Oe,7765:we,8042:Ne,335:Pe,3039:$e,1863:Re,989:Ee,9206:be,9254:ye,5577:ve,8219:fe,6735:me,2594:le,2296:xe,5228:ke,8983:he,9182:ge}]),(c.webpackChunk_N_E=c.webpackChunk_N_E||[]).push([[883],{676:kt,5996:ht,2988:gt,2561:pt,5234:dt,7983:ut,4591:it,7444:ct,3665:ot,6776:at,4101:st,662:rt,7701:_t,9573:nt,7037:tt,3818:et,1730:Ze}]),(c.webpackChunk_N_E=c.webpackChunk_N_E||[]).push([[39],{2067:pe,6195:de,9075:(k,x,s)=>{"use strict";s.r(x),s.d(x,{ComponentMod:()=>q,default:()=>B});var t={};s.r(t),s.d(t,{GET:()=>P,POST:()=>j,runtime:()=>y});var i={};s.r(i),s.d(i,{originalPathname:()=>D,patchFetch:()=>U,requestAsyncStorage:()=>K,routeModule:()=>I,serverHooks:()=>S,staticGenerationAsyncStorage:()=>C});var o=s(7983),l=s(2561),m=s(4828),d=s(6631),h=s(9985),E=s(7528);let y="edge";async function P(M){try{let R=(0,E.N)(),{searchParams:v}=new URL(M.url),F=v.get("islandId"),b=F?parseInt(F,10):null,e=v.get("providerId"),a=e?parseInt(e,10):null,_=`
      SELECT
        s.id, s.name, s.description, s.type, s.provider_id, s.island_id,
        s.price, s.availability, s.images, s.amenities, s.cancellation_policy,
        i.name as island_name
      FROM services s
      JOIN islands i ON s.island_id = i.id
      WHERE s.type LIKE ? -- Filter by type 'activity' (adjust '%activity%' if needed)
    `,r=["%activity%"];b&&!isNaN(b)&&(_+=" AND s.island_id = ?",r.push(b)),a&&!isNaN(a)&&(_+=" AND s.provider_id = ?",r.push(a)),_+=" ORDER BY s.name ASC";let $=R.prepare(_).bind(...r),{results:f,success:N,error:w}=await $.all();if(!N)throw console.error("Failed to fetch activities from D1:",w),Error("Database query failed");return h.xk.json({success:!0,message:"Activities retrieved successfully",data:f||[]})}catch(R){console.error("Error fetching activities:",R);let v=R instanceof Error?R.message:"An unknown error occurred";return h.xk.json({success:!1,message:"Failed to retrieve activities",error:v,data:[]},{status:500})}}async function j(M){console.warn("POST /api/activities is not fully implemented.");try{return h.xk.json({success:!1,message:"POST method for activities not implemented yet.",data:null},{status:501})}catch(R){console.error("Error in POST /api/activities:",R);let v=R instanceof Error?R.message:"An unknown error occurred";return h.xk.json({success:!1,message:"Failed to process request",error:v},{status:500})}}let I=new l.AppRouteRouteModule({definition:{kind:m.x.APP_ROUTE,page:"/api/activities/route",pathname:"/api/activities",filename:"route",bundlePath:"app/api/activities/route"},resolvedPagePath:"/home/chandra/andaman_website_CLI/andaman website CLI/src/app/api/activities/route.ts",nextConfigOutput:"",userland:t}),{requestAsyncStorage:K,staticGenerationAsyncStorage:C,serverHooks:S}=I,D="/api/activities/route";function U(){return(0,d.XH)({serverHooks:S,staticGenerationAsyncStorage:C})}let q=i,B=o.a.wrap(I)},4155:ue,9985:ie,7528:ce},k=>{var x=t=>k(k.s=t);k.O(0,[720,883],()=>x(9075));var s=k.O();(u._ENTRIES=typeof u._ENTRIES>"u"?{}:u._ENTRIES)["middleware_app/api/activities/route"]=s}]),function(){let k={exports:{},loaded:!1};return function(s,t){var i=Object.create,o=Object.defineProperty,l=Object.getOwnPropertyDescriptor,m=Object.getOwnPropertyNames,d=Object.getPrototypeOf,h=Object.prototype.hasOwnProperty,E=e=>o(e,"__esModule",{value:!0}),y=(e,a)=>{E(e);for(var _ in a)o(e,_,{get:a[_],enumerable:!0})},P=(e,a,_)=>{if(a&&typeof a=="object"||typeof a=="function")for(let r of m(a))!h.call(e,r)&&r!=="default"&&o(e,r,{get:()=>a[r],enumerable:!(_=l(a,r))||_.enumerable});return e},j=e=>P(E(o(e!=null?i(d(e)):{},"default",e&&e.__esModule&&"default"in e?{get:()=>e.default,enumerable:!0}:{value:e,enumerable:!0})),e);y(t,{default:()=>R});var I=j((J(),te(L))),K="@next/request-context",C=Symbol.for(K),S=Symbol.for("internal.storage");function D(){let e=u;if(!e[C]){let a=new I.AsyncLocalStorage,_={get:()=>a.getStore(),[S]:a};e[C]=_}return e[C]}var U=D();function q(e,a){return U[S].run(e,a)}function B(e){let a={};return e&&e.forEach((_,r)=>{a[r]=_,r.toLowerCase()==="set-cookie"&&(a[r]=M(_))}),a}function M(e){let a=[],_=0,r,$,f,N,w;function O(){for(;_<e.length&&/\s/.test(e.charAt(_));)_+=1;return _<e.length}function A(){return $=e.charAt(_),$!=="="&&$!==";"&&$!==","}for(;_<e.length;){for(r=_,w=!1;O();)if($=e.charAt(_),$===","){for(f=_,_+=1,O(),N=_;_<e.length&&A();)_+=1;_<e.length&&e.charAt(_)==="="?(w=!0,_=N,a.push(e.substring(r,f)),r=_):_=f+1}else _+=1;(!w||_>=e.length)&&a.push(e.substring(r,e.length))}return a}function R(e){let a=e.staticRoutes.map(r=>({regexp:new RegExp(r.namedRegex),page:r.page})),_=e.dynamicRoutes?.map(r=>({regexp:new RegExp(r.namedRegex),page:r.page}))||[];return async function(r,$){let f=new URL(r.url).pathname,N={};if(e.nextConfig?.basePath&&f.startsWith(e.nextConfig.basePath)&&(f=f.replace(e.nextConfig.basePath,"")||"/"),e.nextConfig?.i18n)for(let O of e.nextConfig.i18n.locales){let A=new RegExp(`^/${O}($|/)`,"i");if(f.match(A)){f=f.replace(A,"/")||"/";break}}for(let O of a)if(O.regexp.exec(f)){N.name=O.page;break}if(!N.name){let O=F(f);for(let A of _||[]){if(O&&!F(A.page))continue;let G=A.regexp.exec(f);if(G){N={name:A.page,params:G.groups};break}}}let w=await q({waitUntil:$.waitUntil},()=>u._ENTRIES[`middleware_${e.name}`].default.call({},{request:{url:r.url,method:r.method,headers:B(r.headers),ip:v(r.headers,b.Ip),geo:{city:v(r.headers,b.City,!0),country:v(r.headers,b.Country,!0),latitude:v(r.headers,b.Latitude),longitude:v(r.headers,b.Longitude),region:v(r.headers,b.Region,!0)},nextConfig:e.nextConfig,page:N,body:r.body}}));return w.waitUntil&&$.waitUntil(w.waitUntil),w.response}}function v(e,a,_=!1){let r=e.get(a)||void 0;return _&&r?decodeURIComponent(r):r}function F(e){return e==="/api"||e.startsWith("/api/")}var b;(function(e){e.City="x-vercel-ip-city",e.Country="x-vercel-ip-country",e.Ip="x-real-ip",e.Latitude="x-vercel-ip-latitude",e.Longitude="x-vercel-ip-longitude",e.Region="x-vercel-ip-country-region"})(b||(b={}))}(k,k.exports),k.exports}.call({}).default({name:"app/api/activities/route",staticRoutes:[{page:"/",regex:"^/(?:/)?$",routeKeys:{},namedRegex:"^/(?:/)?$"},{page:"/_not-found",regex:"^/_not\\-found(?:/)?$",routeKeys:{},namedRegex:"^/_not\\-found(?:/)?$"},{page:"/about",regex:"^/about(?:/)?$",routeKeys:{},namedRegex:"^/about(?:/)?$"},{page:"/activities",regex:"^/activities(?:/)?$",routeKeys:{},namedRegex:"^/activities(?:/)?$"},{page:"/auth/signin",regex:"^/auth/signin(?:/)?$",routeKeys:{},namedRegex:"^/auth/signin(?:/)?$"},{page:"/auth/signup",regex:"^/auth/signup(?:/)?$",routeKeys:{},namedRegex:"^/auth/signup(?:/)?$"},{page:"/contact",regex:"^/contact(?:/)?$",routeKeys:{},namedRegex:"^/contact(?:/)?$"},{page:"/destinations",regex:"^/destinations(?:/)?$",routeKeys:{},namedRegex:"^/destinations(?:/)?$"},{page:"/favicon.ico",regex:"^/favicon\\.ico(?:/)?$",routeKeys:{},namedRegex:"^/favicon\\.ico(?:/)?$"},{page:"/packages",regex:"^/packages(?:/)?$",routeKeys:{},namedRegex:"^/packages(?:/)?$"},{page:"/search",regex:"^/search(?:/)?$",routeKeys:{},namedRegex:"^/search(?:/)?$"},{page:"/search-results",regex:"^/search\\-results(?:/)?$",routeKeys:{},namedRegex:"^/search\\-results(?:/)?$"},{page:"/user/bookings",regex:"^/user/bookings(?:/)?$",routeKeys:{},namedRegex:"^/user/bookings(?:/)?$"},{page:"/user/dashboard",regex:"^/user/dashboard(?:/)?$",routeKeys:{},namedRegex:"^/user/dashboard(?:/)?$"},{page:"/vendor/bookings",regex:"^/vendor/bookings(?:/)?$",routeKeys:{},namedRegex:"^/vendor/bookings(?:/)?$"},{page:"/vendor/dashboard",regex:"^/vendor/dashboard(?:/)?$",routeKeys:{},namedRegex:"^/vendor/dashboard(?:/)?$"},{page:"/vendor/login",regex:"^/vendor/login(?:/)?$",routeKeys:{},namedRegex:"^/vendor/login(?:/)?$"},{page:"/vendor/register",regex:"^/vendor/register(?:/)?$",routeKeys:{},namedRegex:"^/vendor/register(?:/)?$"},{page:"/vendor/services",regex:"^/vendor/services(?:/)?$",routeKeys:{},namedRegex:"^/vendor/services(?:/)?$"},{page:"/vendors",regex:"^/vendors(?:/)?$",routeKeys:{},namedRegex:"^/vendors(?:/)?$"}],dynamicRoutes:[{page:"/api/auth/[...nextauth]",regex:"^/api/auth/(.+?)(?:/)?$",routeKeys:{nxtPnextauth:"nxtPnextauth"},namedRegex:"^/api/auth/(?<nxtPnextauth>.+?)(?:/)?$"},{page:"/api/bookings/[id]",regex:"^/api/bookings/([^/]+?)(?:/)?$",routeKeys:{nxtPid:"nxtPid"},namedRegex:"^/api/bookings/(?<nxtPid>[^/]+?)(?:/)?$"},{page:"/api/destinations/[id]",regex:"^/api/destinations/([^/]+?)(?:/)?$",routeKeys:{nxtPid:"nxtPid"},namedRegex:"^/api/destinations/(?<nxtPid>[^/]+?)(?:/)?$"},{page:"/api/packages/[id]",regex:"^/api/packages/([^/]+?)(?:/)?$",routeKeys:{nxtPid:"nxtPid"},namedRegex:"^/api/packages/(?<nxtPid>[^/]+?)(?:/)?$"},{page:"/api/vendors/[id]",regex:"^/api/vendors/([^/]+?)(?:/)?$",routeKeys:{nxtPid:"nxtPid"},namedRegex:"^/api/vendors/(?<nxtPid>[^/]+?)(?:/)?$"},{page:"/bookings/confirmation/[id]",regex:"^/bookings/confirmation/([^/]+?)(?:/)?$",routeKeys:{nxtPid:"nxtPid"},namedRegex:"^/bookings/confirmation/(?<nxtPid>[^/]+?)(?:/)?$"},{page:"/bookings/payment/[id]",regex:"^/bookings/payment/([^/]+?)(?:/)?$",routeKeys:{nxtPid:"nxtPid"},namedRegex:"^/bookings/payment/(?<nxtPid>[^/]+?)(?:/)?$"},{page:"/destinations/[id]",regex:"^/destinations/([^/]+?)(?:/)?$",routeKeys:{nxtPid:"nxtPid"},namedRegex:"^/destinations/(?<nxtPid>[^/]+?)(?:/)?$"},{page:"/packages/[id]",regex:"^/packages/([^/]+?)(?:/)?$",routeKeys:{nxtPid:"nxtPid"},namedRegex:"^/packages/(?<nxtPid>[^/]+?)(?:/)?$"},{page:"/packages/[id]/book",regex:"^/packages/([^/]+?)/book(?:/)?$",routeKeys:{nxtPid:"nxtPid"},namedRegex:"^/packages/(?<nxtPid>[^/]+?)/book(?:/)?$"}],nextConfig:{basePath:""}})))(p,p,p);export{$t as default};
