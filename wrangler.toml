# Top-level configuration for Cloudflare Worker
name = "andaman-travel-worker" # Choose a unique name for your Worker deployment
compatibility_date = "2024-04-08" # Use a recent date
compatibility_flags = [ "nodejs_compat" ] # Essential for Next.js

# Main entry point for the Worker script generated by @cloudflare/next-on-pages
# Verify this path after running your build script. It might be slightly different.
main = ".wrangler/_worker.js/index.js"

# Static asset binding (Important!)
# Tells the Worker where to find static files (_next/static, images, etc.)
[site]
bucket = ".vercel/output/static" # This should match the static output dir from `next build` / next-on-pages

# D1 Database binding (Keep as is)
[[d1_databases]]
binding = "DB" # This binding name MUST match what your code expects (env.DB)
database_name = "database" # The name you gave your D1 DB in Cloudflare
database_id = "96ed6730-6597-4715-85b0-7408ac403d31" # The actual ID of your D1 DB

# KV Namespace binding (Example - Uncomment and configure if needed)
# [[kv_namespaces]]
# binding = "MY_KV_NAMESPACE"
# id = "your_kv_namespace_id"

# R2 Bucket binding (Example - Uncomment and configure if needed)
# [[r2_buckets]]
# binding = "MY_BUCKET"
# bucket_name = "your-bucket-name"

# Environment variables (Secrets are preferred for sensitive data)
# Use `wrangler secret put VAR_NAME` or the Cloudflare dashboard for secrets.
# [vars]
# NEXT_PUBLIC_API_URL = "YOUR_API_URL"
# NEXT_PUBLIC_SITE_URL = "YOUR_SITE_URL"


# Build configuration
[build]
command = "npm run build"
# watch_dir = "src"